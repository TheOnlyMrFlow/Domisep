$(document).ready(function(){$("#comp-details-form").ajaxForm({url:location.origin+"/controllers/components/modify.php",type:"post",success:function(b){console.log(b);location.reload()},error:function(b){console.log("An error occured")}});var a=document.getElementsByClassName("comp-details-opener");Array.prototype.forEach.call((a),function(b){b.addEventListener("click",function(){console.log("click");var c=this;var d=0;while(!c.className.split(" ").includes("component")){c=c.parentElement;d++;if(d>30){console.error("Cant find root element of the component");return}}document.getElementById("comp-details-id").value=c.id;$.get(encodeURI(location.origin+"/controllers/components/details-json.php?id="+c.id),function(g){console.log(g);g=JSON.parse(g);document.getElementById("comp-details-title").innerHTML=g.name;document.getElementById("comp-details-name").value=g.name;var f=document.getElementById("comp-details-room");f.innerHTML="";$.get(location.origin+"/controllers/rooms/list-json.php",function(h){console.log(h);h=JSON.parse(h);for(var j=0;j<h.length;j++){f.innerHTML+="<option value = '"+h[j]["id"]+"'>"+h[j]["name"]+"</option>"}f.value=g.id_room});var e=document.getElementById("myChart");if(c.id.substr(0,3)=="sen"||c.id.substr(0,3)=="sma"){e.style.display="block";$.post("./../../../controllers/components/update-chart.php",{serial_number:c.id},function(i){var l=JSON.parse(i);console.log(l);alert(maxYValue+" "+minYValue);var j={labels:l[0],datasets:[{borderColor:"rgba(255, 166, 0,1)",data:l[1]}]};var h=e.getContext("2d");var k=new Chart(h,{type:"line",data:j,options:{scales:{yAxes:[{display:true,ticks:{suggestedMin:minYValue,suggestedMax:maxYValue}}]},legend:"Values history"}})})}})})})});