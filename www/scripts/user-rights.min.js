$(document).ready(function(){$("select[name='user-id']").change(function(){var a={user_id:$(this).children("option:selected").val()};$.post("../controllers/rights-json.php",a,function(b){console.log(b);var d=JSON.parse(b);for(var c in d){var e=d[c]["serial_number"];var f=d[c]["access_level"];if(f=="read"){$("tr."+e+" td div.view-button").removeClass("off").addClass("on");$("tr."+e+" td div.edit-button").css("display","block")}else{if(f=="write"){$("tr."+e+" td div.edit-button").css("display","block");$("tr."+e+" td div.view-button").removeClass("off").addClass("on");$("tr."+e+" td div.edit-button").removeClass("off").addClass("on")}}}$("div.dashboard-inner-container.change-user-rights").css("display","flex")})});$(".view-button").on("click",function(b){var a=$(this);if(a.hasClass("off")){var c={level:"read",component:a.parents("tr").attr("class"),user_id:$("select[name='user-id']").children("option:selected").val()};$.post("../controllers/users/update-rights.php",c,function(d){a.removeClass("off").addClass("on");a.parent().next().children().css("display","block")})}else{var c={level:"none",component:a.parents("tr").attr("class"),user_id:$("select[name='user-id']").children("option:selected").val()};$.post("../controllers/users/update-rights.php",c,function(d){a.removeClass("on").addClass("off");a.parent().next().children().css("display","none");a.parent().next().children().removeClass("on").addClass("off")})}});$(".edit-button").on("click",function(b){var a=$(this);if(a.hasClass("off")){var c={level:"write",component:a.parents("tr").attr("class"),user_id:$("select[name='user-id']").children("option:selected").val()};$.post("../controllers/users/update-rights.php",c,function(d){a.removeClass("off").addClass("on")})}else{var c={level:"read",component:a.parents("tr").attr("class"),user_id:$("select[name='user-id']").children("option:selected").val()};$.post("../controllers/users/update-rights.php",c,function(d){a.removeClass("on").addClass("off")})}})});